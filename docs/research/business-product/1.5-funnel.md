# Research: 1.5 Search as a Funnel

## The Mental Model
Search is not a single action. It's a **funnel** with multiple stages, each with its own leakage.

---

## The Search Funnel

```
Query (100%)
    ↓
Retrieval (95% - 5% zero results)
    ↓
Ranking (90% - 5% irrelevant in top 10)
    ↓
Presentation (85% - 5% bad UX/slow)
    ↓
Click (30% - 55% no click)
    ↓
Engagement (20% - 10% bounce)
    ↓
Conversion (5% - 15% didn't buy)
```

---

## Stage 1: Query

### What Happens
User types something in the search box.

### Leakage Points
- **Abandonment**: User starts typing but doesn't submit
- **Typos**: User submits misspelled query
- **Vague queries**: "shoes" vs "men's running shoes size 10"

### Optimization
- **Autocomplete**: Guide user to better queries
- **Spell correction**: "Did you mean..."
- **Query suggestions**: "People also search for..."

### Metrics
- Queries per session
- Autocomplete acceptance rate
- Query length distribution

---

## Stage 2: Retrieval

### What Happens
System finds candidate documents matching the query.

### Leakage Points
- **Zero results**: No matches found
- **Low recall**: Relevant items missed (not in candidates)

### Optimization
- **Synonym expansion**: "laptop" → "notebook"
- **Stemming**: "running" → "run"
- **Fuzzy matching**: Handle typos
- **Vector search**: Semantic similarity

### Metrics
- Zero result rate
- Recall@K (among labeled queries)

---

## Stage 3: Ranking

### What Happens
System orders candidates by relevance.

### Leakage Points
- **Wrong order**: Best item is at position 50, not position 1
- **Business conflicts**: Popular item ≠ relevant item

### Optimization
- **Feature engineering**: Text match, popularity, freshness
- **Learning to Rank**: Train ML model on clicks
- **Business rules**: Boost in-stock, demote out-of-stock

### Metrics
- NDCG
- MRR (Mean Reciprocal Rank)
- Position of first click

---

## Stage 4: Presentation

### What Happens
System displays results to user (SERP).

### Leakage Points
- **Slow load**: User leaves before seeing results
- **Bad snippets**: User can't tell if result is relevant
- **No visual distinction**: All results look the same

### Optimization
- **Fast rendering**: Above-fold content in < 100ms
- **Rich snippets**: Images, prices, ratings
- **Highlighting**: Show why this result matches

### Metrics
- Time to first paint
- Viewport coverage
- Scroll depth

---

## Stage 5: Click

### What Happens
User clicks on a result.

### Leakage Points
- **No click**: User sees results but doesn't click any
- **Pogo-sticking**: User clicks, comes back, clicks another

### Optimization
- **Better titles/descriptions**: Compelling snippets
- **Position optimization**: Best items at top
- **Diversity**: Show variety, not 10 similar items

### Metrics
- Click-through rate (CTR)
- Clicks per search
- Pogo-stick rate

---

## Stage 6: Engagement

### What Happens
User interacts with the clicked item.

### Leakage Points
- **Bounce**: User immediately returns to search
- **Short dwell time**: User leaves product page quickly

### Optimization
- **Better product pages**: More info, better images
- **Related items**: Keep user engaged

### Metrics
- Dwell time
- Bounce rate
- Pages per session

---

## Stage 7: Conversion

### What Happens
User takes the desired action (purchase, signup, download).

### Leakage Points
- **Cart abandonment**: Added but didn't buy
- **Payment issues**: Checkout friction

### Optimization
- **Streamlined checkout**: One-click buy
- **Trust signals**: Reviews, guarantees

### Metrics
- Conversion rate
- Revenue per search
- AOV (Average Order Value)

---

## Funnel Visualization

```
         Query: 100,000 searches
              ↓ (5% zero results)
       Retrieval: 95,000 with results
              ↓ (10% irrelevant top 10)
         Ranking: 85,500 with good results
              ↓ (5% slow/bad UX)
    Presentation: 81,225 saw usable SERP
              ↓ (60% no click)
           Click: 32,490 clicked something
              ↓ (30% bounce)
      Engagement: 22,743 stayed on page
              ↓ (75% didn't convert)
      Conversion: 5,686 converted

Conversion Rate: 5.69%
```

---

## Where to Focus First

### The 80/20 Rule
Most value is at the **top of the funnel**:
- Fixing zero results → huge impact
- Improving ranking → large impact
- Better snippets → medium impact
- Faster checkout → lower impact (after search is done)

### Prioritization Framework
1. **Zero results**: Direct revenue loss
2. **Slow search**: User abandonment
3. **Ranking issues**: Low CTR
4. **UX issues**: Low conversion

---

## Key Takeaways

1. **Search is a multi-stage funnel**, not a single action
2. **Each stage has its own optimization opportunities**
3. **Top-of-funnel improvements have the highest ROI**
4. **Measure each stage separately** to find bottlenecks
5. **Zero results is the biggest leak** — fix it first
